# 🗓️ 2025.08.11(월) – 교육 일지

## 📚 오늘 배운 내용
### LLM
#### Gunicorn과 Uvicorn
- Gunicorn
  - 언어: Python
  - 역할: 
    - WSGI(Web Server Gateway Interface) 기반 Python 웹 애플리케이션을 실행하는 애플리케이션 서버
    - Java의 WAS와 유사
  - 특징:
    - WSGI 표준 지원 → Django, Flask 등과 호환
    - pre-fork worker model 기반 멀티 프로세스 처리
    - Nginx 같은 리버스 프록시와 함께 사용
    - ASGI(비동기) 앱을 직접 실행하지 못하므로, Uvicorn 같은 워커와 조합 필요
  - 실행 예시
    ```
    gunicorn app:app --workers 4 --bind 0.0.0.0:8000
    ```
- uvicorn
  - 언어: Python
  - 역할: ASGI(Asynchronous Server Gateway Interface) 기반 Python 웹 애플리케이션을 실행하는 비동기 서버
  - 특징:
    - FastAPI, Starlette 등 비동기 프레임워크와 호환
    - HTTP/1.1, HTTP/2, WebSocket 지원
    - 가볍고 빠른 이벤트 루프 기반(uvloop, httptools 사용)
    - 단독 실행 가능하지만, 프로덕션에서는 Gunicorn의 워커로 자주 사용
  - 단독 실행 예시:
    ```
    uvicorn app:app --host 0.0.0.0 --port 8000
    ```
- Gunicorn + Uvicorn 조합
  - 이유:
    - Gunicorn은 멀티 프로세스 관리와 모니터링에 강점이 있지만 비동기 ASGI 앱을 직접 실행할 수 없음
    - Uvicorn은 ASGI 실행에 최적화되어 있지만 멀티 프로세스 관리 기능이 부족
    - 따라서 Gunicorn이 프로세스를 관리하고, Uvicorn이 각 워커에서 ASGI 앱을 실행하는 방식이 많이 쓰임
  - 실행 예시:
    ```
    gunicorn app:app \
    -k uvicorn.workers.UvicornWorker \
    --workers 4 \
    --bind 0.0.0.0:8000
    ```
    - `-k uvicorn.workers.UvicornWorker` → Gunicorn이 Uvicorn을 워커로 사용하도록 지정
    - `--workers 4` → 워커 프로세스 수
    
## ✍️ 오늘의 회고
- 오늘은 직접 만든 챗봇을 Gunicorn을 사용해 서빙하는 방법에 대해 알아보았다.
  처음에는 인메모리 방식을 사용했지만, 인메모리 방식은 로드 밸런싱으로 인해 Gunicorn이 여러 워커에 요청을 분산하게 되면서 동일한 세션을 다시 찾기 어려웠다.
  이 문제를 해결하기 위해 Vector DB를 사용하여 세션 데이터를 관리하도록 수정했다.